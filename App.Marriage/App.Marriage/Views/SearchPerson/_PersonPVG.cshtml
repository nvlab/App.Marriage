@using App.Marriage.Utils
@using App.Marriage.DAL
@{
    var cardView = Html.DevExpress().CardView(settings => {
        settings.Name = "PersonCard";
        settings.CallbackRouteValues = new { Controller = "SearchPerson", Action = "PersonPVG" };


        settings.KeyFieldName = "Id";

        settings.SettingsPager.Visible = true;
        settings.Settings.ShowHeaderPanel = true;
        settings.Settings.ShowHeaderFilterButton = true;
        settings.SettingsBehavior.AllowSelectByCardClick = true;
        int index = 0;


        settings.Columns.Add(c =>
        {
            c.FieldName = "Photo1";
            c.VisibleIndex = index;
            // c.ColumnType = MVCxCardViewColumnType.BinaryImage;
            c.EditorProperties().Image(img => {
                img.LoadingImageUrl= "https://demos.devexpress.com/ASP/Content/CardView.png";
                img.ImageWidth = img.ImageHeight = System.Web.UI.WebControls.Unit.Pixel(1500);
            });

        });

        settings.Columns.Add("FullName");

        //settings.Columns.Add(column => {
        //    column.Name = "FullName";
        //    column.Caption = Globalization.FullName;
        //    column.ColumnType = MVCxCardViewColumnType.TextBox;
        //    column.VisibleIndex = index;
        //});

        settings.Columns.Add("PlaceBirth");
        //settings.Columns.Add(column =>
        //{
        //    column.Name = "PlaceBirth";
        //    column.Caption = Globalization.PlaceBirth;
        //    column.ColumnType = MVCxCardViewColumnType.TextBox;
        //    column.VisibleIndex = index;

        //});

        settings.Columns.Add("Nationality_Id");
        //settings.Columns.Add(column =>
        //{
        //    column.Name = "Nationality_Id";
        //    column.Caption = Globalization.App_Nationality;
        //    column.EditorProperties().ComboBox(p =>
        //    {
        //        p.TextField = "Name";
        //        p.ValueField = "Id";
        //        p.ValueType = typeof(int);
        //        p.DataSource = NationalityDAL.GetNationalitysComboList();
        //    });
        //});
        settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);


        settings.SettingsPager.SettingsTableLayout.ColumnCount = 2;
        settings.SettingsPager.SettingsTableLayout.RowsPerPage = 2;
      //  settings.CardLayoutProperties.Items.Add("Photo1").ShowCaption = DefaultBoolean.False;
        settings.CardLayoutProperties.Items.AddGroupItem(g =>
        {
            g.ShowCaption = DefaultBoolean.True;
            g.VerticalAlign = FormLayoutVerticalAlign.Middle;
            g.SettingsItemCaptions.Location = LayoutItemCaptionLocation.Top;
            g.GroupBoxDecoration = GroupBoxDecoration.None;

            g.Items.Add(i => { i.ColumnName = "FullName"; i.Caption= Globalization.FullName; } );
            g.Items.Add(i => { i.ColumnName = "PlaceBirth"; i.Caption = Globalization.PlaceBirth; });
            g.Items.Add(i => { i.ColumnName = "Nationality_Id"; i.Caption = Globalization.App_Nationality; });
        });
        settings.CardLayoutProperties.Styles.LayoutItem.Caption.Font.Bold = true;


    });
    if (ViewData["EditError"] != null){
        cardView.SetEditErrorText((string)ViewData["EditError"]);
    }
}
@cardView.Bind(Model).GetHtml()